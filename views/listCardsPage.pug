extends layout

block head-extras
  script(src='/js/list.js')

block content
  h1= title
  .cards-list
    .panel.panel-default
      .panel-heading Displaying cards #{offset+1}-#{offset+cards.length} (#{totalCards} total)
      table.table
        thead
          tr
            th #
            th Front
            th Back
            th Next Review Date
            th Difficulty (lower is better)
            th Reps
            th Delete?
        tbody
          each card in cards
            tr
              th(scope="row")= card.id
              td= card.front
              td= card.back
              td= moment(card.next_review).format('MMMM Do, YYYY')
              td= card.difficulty
              td= card.reps
              td
                button.btn.btn-danger.btn-delete
                  span.glyphicon.glyphicon-minus
  if pages > 1
    // Handle the enabling / disabled the prev & next buttons
    -
      const base = '/listCards/';
      var previousLink = base + (currentPage-1);
      var previousLinkDisabled = '';
      var nextLink = base + (currentPage+1);
      var nextLinkDisabled = '';
      switch(currentPage) {
        case 0:
          previousLink = '#';
          previousLinkDisabled = 'disabled';
          break;
        case pages-1:
          nextLink = '#';
          nextLinkDisabled = 'disabled';
          break;
      }

    nav
      ul.pagination
        li.page-item(class=previousLinkDisabled)
          a.page-link(href=previousLink) Previous

        - for (var i = 0; i < pages; i++) {
          - var active = (i===currentPage ? 'active' : '');
          li.page-item(class=active)
            a.page-link(href='/listCards/'+i) #{i}
        - }

        li.page-item(class=nextLinkDisabled)
          a.page-link(href=nextLink) Next
